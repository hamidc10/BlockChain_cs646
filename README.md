
# Group 3

###### By: Hamid Choucha, Chantel Rose Walia, Xavier Martinez, Vira Shankar, Trey Carroll 
  
---------------------------------------------------------------------------------------------------
###### *DISCLAIMER*

An issue can appear when running this code on GIT HUB Workspace VS a normal Python environment like (VS code) for the file path
    
If you are using workspace then change the file path in Block.py to this ON LINES 41-43 and in transaction.py ON LINE 39:
* block.py
    - pending = "./src/pending/"
    - processed = "./src/processed/"
    - blocks = "./src/blocks/"
* transaction.py
    - folder_name = "./src/pending/"

If you are using something like VScode then change the file path in Block.py to this ON LINES 41-43:
* block.py
    - pending = "../src/pending/"
    - processed = "../src/processed/"
    - blocks = "../src/blocks/"
* transaction.py
    - folder_name = "../src/pending/"


## HOW TO RUN THE CODE
Open up your terminal and get to the folder called: *src*

Then make sure that inside you find:
- block.py 
- transaction.py
- main.py
- Folder called: "pending"
- Folder called: "block"
- Folder called: "processed"

Once everything is there you go back to the terminal and run Python3 main.py or Python main.py:
* The user will be prompted if they want to have the code print the block in the terminal or not by typing either (yes or no...)
* Then the user will select to make a transaction by choosing choice one where they type in the following information that was asked by the code in the terminal.
* Once the user has created the transactions desired then they can choose choice 2 to exit out of the code.

*Note: Our code considers a chain as all the transactions that occur while the code is running. When the code is exited, a new chain starts.*


## EXPLANATION OF THE PYTHON FILES 



### main.py
This is the driver code. <br/>
It first asks the user if they want to print the block that has been created to the terminal. The block is printed as a json. It then displays a menu until the user chooses the option to exit or they explicitly exit the code themselves.<br/>

Menu options:
1. Add Transaction
2. Exit 

When the user select (1) to add a transaction a new transaction file is generated by ```transaction.py``` and added to the *pending* folder.
```transaction.py``` returns the file name of transaction json file. This file name is then sent to ```block.py``` for processing. <br/>

Selecting option 2 exits the code.<br/>



### transaction.py
The goal of the transaction code is to get information that is required for creating a hash file that can be used to create a block.
The code asks the user to input the following information:
1. Who is the transaction from?
2. Who is the transaction to?
3. Amount of transaction?
4. What is the timestamp (date, current time)

Once the code has all the information required it then turns the following into a JSON dictionary object. The code then 
used that object using a hash library to perform the SHA-256 hashing algorithm on it. 
The code then adds the file to the *pending* folder.
In the end it returns the name of the transaction file that has been created from the hash.

Links used:
1. https://bobbyhadz.com/blog/python-typeerror-strings-must-be-encoded-before-hashing
2. https://www.geeksforgeeks.org/reading-and-writing-json-to-a-file-in-python/



### block.py 
Important variables/components:
- File_list: list of hashes that were used as the transaction file name and inputed to the block as a parameter.
- Block_list: list of hash that were used as the block file name.
- Block:
    - Header component: 
        * height of block -> based on a chain of transactions
        * timestamp of when block was created 
        * hash of previous block or "NA" if no previous block exists for a chain
        * hash of body of the block

    - Body component:
        * list of dictionaries -> contains content of current transaction being added to block and body of previous block in the chain (if one exists)

The goal of the block code is to get the transaction information and hash to create what is called a block.<br/> 
The block has a header component and a body component. The code recieves the file name of the Transaction that has to be added to a block, the file is added to a file_list that keeps track of all transactions in a chain.<br/> 
Once the code receives the file name it then extracts the file from the *pending* folder and its content is added to the body component.<br/> 
Then the code checks for a prevous block in a block_list that it maintains. Based on the size of the list a height for the new block is determined, as well as being assigned to the 'previousblock' component of the header.<br/> 
The previous blocks body is also read from the block file in the *blocks* folder and then added to the body component.<br/> 
The code then creates the header component of the block. The header is then hashed and this will be used as the file name for the block. This hash is also added to the block_list.<br/> 
Once the header and body have been made, the block is formed and added to a file : header_hash.json in the *blocks* folder.<br/> 
In the end the transaction that was just processed is moved from the *pending* folder to the *processed* folder.<br/> 


**Links used:**
1. https://www.geeksforgeeks.org/reading-and-writing-json-to-a-file-in-python/
2. https://docs.python.org/3/library/hashlib.html
3. https://bobbyhadz.com/blog/python-typeerror-strings-must-be-encoded-before-hashing
4. https://www.geeksforgeeks.org/important-blockchain-terminologies/?ref=gcse
5. https://www.learndatasci.com/solutions/python-typeerror-sequence-item-n-expected-string-list-found/
6. https://stackoverflow.com/questions/123198/how-to-copy-files
7. https://www.geeksforgeeks.org/how-to-move-all-files-from-one-directory-to-another-using-python/
8. https://www.geeksforgeeks.org/how-to-read-dictionary-from-file-in-python/
